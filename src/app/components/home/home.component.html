<!-- Template per "Tipo Immobile" -->
<ng-template #immobiliTemplate let-dialogRef="dialogRef">
  <div class="dialog-container">
    <h2>Tipo Immobile</h2>
    <ul class="options-list">
      <li *ngFor="let option of ['Casa', 'Appartamento', 'Villa']"
          class="option-item"
          (click)="selectOption(dialogRef, option)">
        {{ option }}
      </li>
    </ul>
  </div>
</ng-template>

<!-- Template per "Tipo Annuncio" -->
<ng-template #annuncioTemplate let-dialogRef="dialogRef">
  <div class="dialog-container">
    <h2>Tipo Annuncio</h2>
    <ul class="options-list">
      <li *ngFor="let option of ['Affitto', 'Vendita']"
          class="option-item"
          (click)="selectOption(dialogRef, option)">
        {{ option }}
      </li>
    </ul>
  </div>
</ng-template>

<!-- Template per "Luogo" -->
<ng-template #luogoTemplate let-dialogRef="dialogRef">
  <div class="dialog-container-luogo">
    <h2>Seleziona Luogo</h2>
    <ul class="options-list">
      <li *ngFor="let city of places"
          class="option-item"
          (click)="selectLuogo(dialogRef, city.name, city.coordinates)"
          (mouseenter)="onMouseEnter(city)">
        {{ city.name }}
        <!-- Mostra i luoghi di interesse quando il mouse passa sopra la città -->
        <ul *ngIf="hoveredCity === city.name">
        </ul>
      </li>
    </ul>

    <!-- Aggiungi la mappa qui separatamente -->
    <google-map [center]="center" [zoom]="zoom">
      <map-marker *ngFor="let marker of markers"
                  [position]="marker.coordinates">
      </map-marker>
    </google-map>
  </div>
</ng-template>


<header>
  <navbar></navbar>
</header>

<main>
  <section class="hero">
    <img class="logo" src="assets/logo.png">
    <section class="search-section">
      <form action="/search" method="get">
        <div class="filters">
          <!-- Sezione superiore in una riga con Flexbox -->
          <div class="search-line">
            <p>Cerco</p>
            <div class="filter">
              <button type="button" mat-button (click)="openSelectDialog(immobiliTemplate, 'selectedImmobili')">
                {{ selectedImmobili || 'Tipo Immobile' }}
              </button>
            </div>
            <p>in</p>
            <div class="filter">
              <button type="button" mat-button (click)="openSelectDialog(annuncioTemplate, 'selectedAffittoVendita')">
                {{ selectedAffittoVendita || 'Tipo Annuncio' }}
              </button>
            </div>
          </div>

          <!-- Sezione inferiore con "a" e Luogo -->
          <div class="search-line">
            <p>a</p>
            <div class="filter">
              <button type="button" mat-button (click)="openMap(luogoTemplate, 'selectedLuogo')">
                {{ selectedLuogo || 'Seleziona Luogo' }}
              </button>
            </div>
          </div>
        </div>
      </form>
    </section>
  </section>

  <section class="featured-listings">
    <h2>Annunci in Evidenza</h2>
    <div class="listing">
      <h3>Appartamento a Milano</h3>
      <p>Una descrizione breve dell'appartamento...</p>
      <a href="/listing/milano">Dettagli</a>
    </div>
    <div class="listing">
      <h3>Villa al mare</h3>
      <p>Una descrizione breve della villa...</p>
      <a href="/listing/villa">Dettagli</a>
    </div>
  </section>

  <section class="about-us">
    <h2>Chi Siamo</h2>
    <p>Scopri di più su EasyHome e sulla nostra missione di aiutarti a trovare la casa perfetta.</p>
    <a href="/about">Leggi di più</a>
  </section>
</main>

<footer>
  <p>&copy; 2025 EasyHome. Tutti i diritti riservati.</p>
  <ul>
    <li><a href="/privacy">Privacy</a></li>
    <li><a href="/terms">Termini e condizioni</a></li>
  </ul>
</footer>
